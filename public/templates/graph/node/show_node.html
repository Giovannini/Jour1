<div class="form-field">
    <div class="form-field__legend--single">
        <a href="{{ back_url }}">Go back</a>
    </div>
</div>

<div ng-show="!isShowingNode()">
    <div class="form-field">
        <div class="form-field__legend--single">
            <h2>{{ message }}</h2>
        </div>
    </div>
</div>
<div ng-show="isShowingNode()" class="form">

    <div class="form-field">
        <div class="form-field__legend--single">
            <h2>{{ node.label }}</h2>
            - <a href="#/node/{{node.label}}/edit">Edit</a>
            - <a ng-click="deleteNode()" href="">Delete</a>
            <div class="error">
                <div ng-if="error">{{ error }}</div>
                <div ng-if="errors.relationsFrom.length > 0 || errors.relationsTo.length > 0">
                    Relation where {{ node.label }} appears
                    <ul>
                        <li ng-repeat="relation in errors.relationsFrom">{{ node.label }} -(<a href="#/relation/{{relation.relation}}">{{ relation.relation }}</a>)-> <a href="#/node/{{relation.concept}}">{{ relation.concept }}</a></li>
                        <li ng-repeat="relation in errors.relationsTo"><a href="#/node/{{relation.concept}}">{{ relation.concept }}</a> -(<a href="#/relation/{{relation.relation}}">{{ relation.relation }}</a>)-> {{ node.label }}</a></li>
                    </ul>
                </div>
                <div ng-if="errors.needs.length > 0">
                    Need using {{ node.label }}
                    <ul>
                        <li ng-repeat="need in errors.needs">{{ need.label }}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="form-field">
        <div class="form-group">
            <h3 class="form-field__legend--single">Properties :</h3>
        </div>
        <div ng-repeat="property in node.properties" class="form-group highlight">
            <div class="form-group">
                <div class="form-group__label">{{ property.property.label }}</div>
                <div class="form-group__input">{{ property.value }}</div>
            </div>
        </div>
    </div>
    <div class="form-field">
        <div class="form-group">
            <h3 class="form-field__legend--single">Rules :</h3>
        </div>
        <div ng-repeat="element in node.rules" class="form-group highlight">
            <div class="form-group__label">
                {{ element.property.label }}
            </div>
            <div class="form-group__input">
                {{ element.value }}
            </div>
        </div>
    </div>
    <div class="form-field">
        <div class="form-group">
            <h3 class="form-field__legend--single">Display :</h3>
        </div>
        <div class="form-group highlight">
            <div class="form-group__label">
                Color:
            </div>
            <div class="form-group__input">
                <span style="color: {{node.display.color}}">{{ node.display.color }}</span>
            </div>
        </div>
        <div class="form-group highlight">
            <div class="form-group__label">
                ZIndex:
            </div>
            <div class="form-group__input">
                {{ node.display.zindex }}
            </div>
        </div>
    </div>

    <div class="form-field">
        <div class="form-group">
            <h3 class="form-field__legend--single">Needs :</h3>
            <div ng-repeat="need in node.needs" class="form-group highlight">
                <div class="form-group__label--single">
                    {{ need.label }}
                </div>
            </div>
        </div>
    </div>

    <div class="form-field">
        <div class="form-group">
            <h3 class="form-field__legend--single">Relations :</h3>
        </div>
        <div ng-repeat="edge in edges" class="form-group highlight">
            {{ edge.label }} -> {{ edge.target.label }}
        </div>
    </div>
</div>